## ğŸ“± ã‚¢ãƒ—ãƒªæ¦‚è¦

### ã‚¿ã‚¤ãƒˆãƒ«æ¡ˆï¼ˆä¾‹ï¼‰

**ã€ŒMemoryTalkï¼ˆãƒ¡ãƒ¢ãƒªãƒ¼ãƒˆãƒ¼ã‚¯ï¼‰ã€**
**æ€ã„å‡º Ã— è‹±èª Ã— AI ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ·»å‰Šï¼†å…±æ„Ÿ**

### ã‚³ãƒ³ã‚»ãƒ—ãƒˆ

> **ã‚¹ãƒãƒ›ã®æ€ã„å‡ºå†™çœŸã‚’ä½¿ã£ã¦ã€è‡ªåˆ†ã®æ„Ÿæƒ…ã‚’è‹±èªã§è¡¨ç¾ã€‚AI ãŒæ·»å‰Šã—ã€æ°—æŒã¡ã¾ã§æ¨æ¸¬ã—ã¦ã‚µãƒãƒ¼ãƒˆã—ã¦ãã‚Œã‚‹å…±æ„Ÿå‹è‹±èªå­¦ç¿’ã‚¢ãƒ—ãƒªã€‚**

### ä½“é¨“ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆ1 ç”»é¢å®Œçµ UIï¼‰

- ä¸Šéƒ¨ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼é¸æŠã®å†™çœŸ
- å†™çœŸã®ä¸‹ã«ï¼šã€Œã“ã®ã¨ãã®æ°—æŒã¡ã‚’è‹±èªã§ä¼ãˆã¦ã¿ã‚ˆã†ï¼ã€
- å…¥åŠ›æ¬„ï¼ˆãƒ†ã‚­ã‚¹ãƒˆï¼‰
- ã€Œç¢ºèªã€ãƒœã‚¿ãƒ³

  - AI ãŒï¼š

    - âœ… æ·»å‰Šã‚³ãƒ¡ãƒ³ãƒˆï¼ˆè‰¯ã„ç‚¹ï¼‹è¨€ã„æ›ãˆä¾‹ï¼‰

- è¡¨ç¾ã™ã¹ã¦ã‚’ãã®å†™çœŸã¨ç´ã¥ã‘ã¦ä¿å­˜

### ã‚¹ãƒ†ãƒƒãƒ— 2ï¼šGPT é€£æº

---

## ğŸ§© å®Ÿè£…ã—ãŸã„æœ€ä½é™ã®æ©Ÿèƒ½ï¼ˆMVPï¼‰

| æ©Ÿèƒ½                        | èª¬æ˜                                     | å‚™è€ƒ                    |
| --------------------------- | ---------------------------------------- | ----------------------- |
| 1. å†™çœŸé¸æŠãƒ»è¡¨ç¤º           | ã‚«ãƒ¡ãƒ©ãƒ­ãƒ¼ãƒ«ã‹ã‚‰ 1 æš                    | `expo-image-picker`ä½¿ç”¨ |
| 2. æ„Ÿæƒ…å…¥åŠ›æ¬„               | è‹±èªã§è‡ªç”±ã«è¡¨ç¾                         | TextInput               |
| 3. GPT æ·»å‰Šãƒ»ã‚¢ãƒ‰ãƒã‚¤ã‚¹è¡¨ç¤º | ã€Œã™ã”ãã„ã„ï¼ã§ã‚‚ã€œã®æ–¹ãŒè‡ªç„¶ã ã‚ˆã€ãªã© | è‹±èªã‚³ãƒ¼ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ  |
| 4. ãƒ‡ãƒ¼ã‚¿ä¿å­˜               | å†™çœŸï¼‹è‹±èªè¡¨ç¾ï¼ˆè¤‡æ•°ï¼‰ï¼‹æ—¥æ™‚             | Supabase ã§ä¿å­˜         |
| 5. ä¿å­˜å±¥æ­´ã®è¡¨ç¤º           | éå»ã®å­¦ç¿’å†…å®¹ã‚’æŒ¯ã‚Šè¿”ã‚Šå¯èƒ½             | ä»»æ„ï¼ã‚·ãƒ³ãƒ—ãƒ«ã§ OK     |

---

## ğŸ”§ æŠ€è¡“ä»•æ§˜

| åˆ†é¡           | ä½¿ç”¨æŠ€è¡“ãƒ»ãƒ„ãƒ¼ãƒ«                                             |
| -------------- | ------------------------------------------------------------ |
| ãƒ•ãƒ­ãƒ³ãƒˆ       | React Nativeï¼ˆExpoï¼‰ï¼‹ TypeScript                            |
| UI ãƒ©ã‚¤ãƒ–ãƒ©ãƒª  | Expo components / ã‚«ã‚¹ã‚¿ãƒ                                    |
| ç”»åƒå–å¾—       | `expo-image-picker`                                          |
| è‹±èªæ·»å‰Šãƒ»æ¨è«– | OpenAI GPT-4o API                                            |
| çŠ¶æ…‹ç®¡ç†       | React Hooksï¼ˆ`useState`, `useEffect`ï¼‰                       |
| ãƒ‡ãƒ¼ã‚¿ä¿å­˜     | Supabaseï¼ˆPostgreSQL + Storageï¼‰                             |
| API ã‚­ãƒ¼ç®¡ç†   | `.env`ã§ç®¡ç†ï¼ˆå¾Œã« Cloud Function ç§»è¡Œå¯ï¼‰                   |
| AI é€£æºé–¢æ•°    | `services/gemini.js`ã«é›†ç´„                                   |
| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç† | Git + GitHub                                                 |
| ãƒ†ã‚¹ãƒˆ         | å¿…é ˆã§ã¯ãªã„ãŒãƒ­ã‚¸ãƒƒã‚¯éƒ¨åˆ†ã®ã¿ç°¡æ˜“ãƒ†ã‚¹ãƒˆå¯èƒ½ï¼ˆ`vitest`ãªã©ï¼‰ |

---

## ğŸ› ï¸ å…¨ä½“ã®é–‹ç™ºã‚¹ãƒ†ãƒƒãƒ—ï¼ˆæ®µéšã”ã¨ã«æ•´ç†ï¼‰

---

### ğŸ”° ã‚¹ãƒ†ãƒƒãƒ— 0ï¼šé–‹ç™ºç’°å¢ƒã®æº–å‚™ï¼ˆæ‰€è¦æ™‚é–“ï¼š1ã€œ2 æ™‚é–“ï¼‰

| ä½œæ¥­                            | èª¬æ˜                             |
| ------------------------------- | -------------------------------- |
| âœ… Expo CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«      | `npm install -g expo-cli`        |
| âœ… æ–°è¦ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ         | `npx create-expo-app MemoryTalk` |
| âœ… GitHub ã«ãƒªãƒã‚¸ãƒˆãƒªä½œæˆ      | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã¨ CI ç”¨é€”         |
| âœ… .env ãƒ•ã‚¡ã‚¤ãƒ«ã§ API ã‚­ãƒ¼ç®¡ç† | GPT ã‚„ Supabase ç”¨ã®ã‚­ãƒ¼ã‚’ä¿å­˜   |

---

### ğŸ–¼ï¸ ã‚¹ãƒ†ãƒƒãƒ— 1ï¼šåŸºæœ¬ UI ã®æ§‹ç¯‰ï¼ˆ3ã€œ4 æ™‚é–“ï¼‰

| ä½œæ¥­                  | å†…å®¹                                | ã‚¹ãƒãƒ›å¯¾å¿œ            |
| --------------------- | ----------------------------------- | --------------------- |
| âœ… ç”»åƒé¸æŠ UI        | expo-image-picker ã§å†™çœŸ 1 æšã‚’å–å¾— | âœ… Expo Go ã§ç¢ºèªå¯èƒ½ |
| âœ… è‹±èªå…¥åŠ›æ¬„         | TextInput ï¼‹ç¢ºèªãƒœã‚¿ãƒ³è¨­ç½®          | âœ… ã‚¹ãƒãƒ›ã§æ“ä½œå¯èƒ½   |
| âœ… ã‚¢ãƒ‰ãƒã‚¤ã‚¹è¡¨ç¤ºé ˜åŸŸ | æ·»å‰Šã‚³ãƒ¡ãƒ³ãƒˆãƒ»è¨€ã„æ›ãˆã‚’è¡¨ç¤º        | âœ… ã‚¹ãƒãƒ›ã§ç¢ºèªå¯èƒ½   |

---

### ğŸ¤– ã‚¹ãƒ†ãƒƒãƒ— 2ï¼šGPT é€£æºï¼ˆ4ã€œ5 æ™‚é–“ï¼‰

| ä½œæ¥­                      | å†…å®¹                                     | ã‚¹ãƒãƒ›å¯¾å¿œ                                |
| ------------------------- | ---------------------------------------- | ----------------------------------------- |
| âœ… GPT API ã¨ã®æ¥ç¶š       | fetch()ã‚„ axios ã§ OpenAI/Gemini ã« POST | âŒ ã‚¹ãƒãƒ›ã ã‘ã§ã¯ç„¡ç†ï¼ˆAPI ã‚­ãƒ¼ç®¡ç†å¿…è¦ï¼‰ |
| âœ… æ·»å‰Šï¼‹ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã®å‡ºåŠ› | Prompt1 ã§è‹±èªã‚³ãƒ¼ãƒå¿œç­”ç”Ÿæˆ             | âœ… è¡¨ç¤ºã¯ã‚¹ãƒãƒ›ã§ç¢ºèªå¯                   |

---

### ğŸ—ƒï¸ ã‚¹ãƒ†ãƒƒãƒ— 3ï¼šãƒ‡ãƒ¼ã‚¿ä¿å­˜ï¼ˆSupabaseï¼‰ï¼ˆ4ã€œ5 æ™‚é–“ï¼‰

| ä½œæ¥­                      | å†…å®¹                           | ã‚¹ãƒãƒ›å¯¾å¿œ                |
| ------------------------- | ------------------------------ | ------------------------- |
| âœ… Supabase ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—  | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆãƒ»ãƒ†ãƒ¼ãƒ–ãƒ«è¨­è¨ˆ | âŒ ç®¡ç†ç”»é¢æ“ä½œï¼ PC å¿…é ˆ |
| âœ… å†™çœŸ URLï¼å…¥åŠ›æ–‡ã®ä¿å­˜ | insert()ã§ä¿å­˜                 | âœ… ã‚¹ãƒãƒ›ã§ç¢ºèªã¯å¯èƒ½     |
| âœ… ä¿å­˜ãƒ‡ãƒ¼ã‚¿ä¸€è¦§è¡¨ç¤º     | å±¥æ­´ç”»é¢ã®å®Ÿè£…                 | âœ… ã‚¹ãƒãƒ›ã§æ“ä½œå¯         |

---

### ğŸ¨ ã‚¹ãƒ†ãƒƒãƒ— 4ï¼šUI æ•´å‚™ãƒ»èª¿æ•´ï¼ˆ2ã€œ3 æ™‚é–“ï¼‰

| ä½œæ¥­                          | å†…å®¹                     | ã‚¹ãƒãƒ›å¯¾å¿œ             |
| ----------------------------- | ------------------------ | ---------------------- |
| âœ… ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´             | ä¸Šéƒ¨å†™çœŸï¼‹ä¸‹éƒ¨å¯¾è©±ã‚¨ãƒªã‚¢ | âœ… ã‚¹ãƒãƒ›æ“ä½œã§ç¢ºèª OK |
| âœ… è‹±èªã‚­ãƒ£ãƒ©é¢¨ã‚¢ãƒ‰ãƒã‚¤ã‚¹æ¼”å‡º | å¹ãå‡ºã—ã‚„ã‚¢ã‚¤ã‚³ãƒ³è¿½åŠ    | âœ… ã‚¹ãƒãƒ›ã§ç¢ºèª OK     |

---

### âœ… ã‚¹ãƒ†ãƒƒãƒ— 5ï¼šMVP å®Œæˆãƒ»ãƒ‡ãƒ¢å‹•ä½œç¢ºèªï¼ˆ1 æ™‚é–“ï¼‰

| ä½œæ¥­                                  | å†…å®¹ |
| ------------------------------------- | ---- |
| âœ… å…¨ç”»é¢å‹•ä½œã‚’ã‚¹ãƒãƒ›ã§é€šã—ç¢ºèª       |      |
| âœ… è¡¨ç¾ã®ä¿å­˜ï¼å±¥æ­´ç¢ºèªãªã©æ¤œè¨¼       |      |
| âœ… æ©Ÿèƒ½å˜ä½ã®ã‚³ãƒ¼ãƒ‰æ•´ç†ãƒ»ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ  |      |

---

## ğŸ¤– AI ã¸ã®æŒ‡ç¤ºãƒ«ãƒ¼ãƒ«ï¼ˆPrompt è¨­è¨ˆï¼‹é–‹ç™ºã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„ï¼‰

### âœï¸ GPT ã¸ã® Prompt è¨­è¨ˆ

#### â‘  è‹±èªã‚³ãƒ¼ãƒï¼ˆæ·»å‰Šï¼‹è‡ªç„¶ãªè¨€ã„æ›ãˆï¼‰

```text
ã‚ãªãŸã¯ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªè‹±èªã‚³ãƒ¼ãƒã§ã™ã€‚
ä»¥ä¸‹ã®è‹±æ–‡ã‚’è¦‹ã¦ã€æ·»å‰Šã¨å„ªã—ã„ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’è¿”ã—ã¦ãã ã•ã„ã€‚

ãƒ»ãã®ã¾ã¾ä½¿ãˆã‚‹ãªã‚‰ã€Œå®Œç’§ï¼ã€ã¨è¿”ã™ã€‚
ãƒ»ç›´ã—ãŸã»ã†ãŒè‰¯ã„å ´åˆã¯ã€æ·»å‰Šå¾Œã®æ–‡ï¼‹ç†ç”±ã‚’èª¬æ˜ã€‚
ãƒ»ã§ãã‚Œã°è‡ªç„¶ãªè¨€ã„æ›ãˆä¾‹ã‚‚1ã¤ãã ã•ã„ã€‚
```

---

### ğŸ› ï¸ å‘½åè¦å‰‡ï¼ˆTypeScript åŸºæº–ï¼‰

| å¯¾è±¡             | å‘½åè¦å‰‡                                         |
| ---------------- | ------------------------------------------------ |
| å¤‰æ•°å           | `camelCase`ï¼ˆä¾‹ï¼š`userInput`, `adviceText`ï¼‰     |
| é–¢æ•°å           | `camelCase`ï¼ˆä¾‹ï¼š`handleSubmit`, `fetchAdvice`ï¼‰ |
| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå | `PascalCase`ï¼ˆä¾‹ï¼š`PhotoPreview`, `AdviceCard`ï¼‰ |
| ãƒ•ã‚¡ã‚¤ãƒ«å       | `kebab-case.tsx`ï¼ˆä¾‹ï¼š`photo-preview.tsx`ï¼‰      |

---

### ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆãƒ»ãƒ†ã‚¹ãƒˆæ–¹é‡

- GPT ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã«ã¯**æ„å›³èª¬æ˜ã‚³ãƒ¡ãƒ³ãƒˆå¿…é ˆ**
- æ·»å‰Šãƒ­ã‚¸ãƒƒã‚¯ã‚„ä¿å­˜å‡¦ç†ãªã©**å‰¯ä½œç”¨ã®ã‚ã‚‹å‡¦ç†ã«ã¯ 1 è¡Œèª¬æ˜**
- ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã¯æ™‚é–“ãŒã‚ã‚Œã°`adviceFetch()`ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ•´å½¢éƒ¨åˆ†ã«ç°¡æ˜“ãƒ†ã‚¹ãƒˆã‚’

####UI æ©Ÿèƒ½è¦ä»¶

### ğŸ“± å…¨ç”»é¢å…±é€š

- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ä¸‹ã‹ã‚‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’é–‹å§‹ã™ã‚‹ï¼ˆiPhone ã®ä¸Šéƒ¨ãƒãƒ¼ã‚ˆã‚Šä¸‹ï¼‰
- ã‚¿ã‚¤ãƒˆãƒ«ã€ŒMemoryTalkã€ã¯ã™ã¹ã¦ã®ç”»é¢ã§å·¦ä¸Šå›ºå®šï¼ˆä¸­å¤®å¯„ã‚Š NGï¼‰

### ğŸ§  LearningScreen è¦ä»¶ä¸€è¦§

- ã‚¹ãƒ†ãƒƒãƒ— UI æ§‹æˆã‚’ç¶­æŒï¼š[ğŸ“¸ å†™çœŸè¡¨ç¤º] â†’ [âœï¸ å…¥åŠ›] â†’ [ğŸ§  ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯]
- ç”»åƒã¯ aspectRatio: 1 ã§ç¸¦æ¨ªæ¯”ã‚’è‡ªå‹•èª¿æ•´ï¼ˆè¦‹åˆ‡ã‚Œé˜²æ­¢ï¼‰
- å†™çœŸã¯ 1000 æšã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ æŠ½å‡ºã—ã€å¤ã„ã‚‚ã®ã‚‚å«ã¾ã‚Œã‚‹ã‚ˆã†ã«
- å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã¯ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã«è¢«ã‚‰ãªã„ã‚ˆã†ã«èª¿æ•´
- ã‚¿ã‚¤ãƒˆãƒ«ã‚’æŠ¼ã™ã¨ Home ã«é·ç§»
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ä»˜ãã®å†™çœŸåè»¢è¡¨ç¤ºï¼ˆæ¬¡ã®å†™çœŸã¸é·ç§»æ™‚ï¼‰
- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¯è‡ªç„¶ãªæ—¥æœ¬èªè¡¨ç¾ï¼ˆAPI å‡ºåŠ›å‰æï¼‰
- è¨­å®šãƒœã‚¿ãƒ³ã¯ä¸è¦

### ğŸ“– HistoryScreen è¦ä»¶ä¸€è¦§

- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒ¼ä¸‹ã‹ã‚‰è¡¨ç¤ºï¼ˆè¦‹åˆ‡ã‚Œãªã„ï¼‰
- ã‚¿ã‚¤ãƒˆãƒ«ã€ŒMemoryTalkã€ã¯å·¦ä¸Šã«å›ºå®š
- å†™çœŸã‚’ãƒ¡ã‚¤ãƒ³ã¨ã—ãŸã‚°ãƒªãƒƒãƒ‰è¡¨ç¤ºï¼ˆå°†æ¥å¯¾å¿œï¼‰
- ã‚¿ãƒƒãƒ—ã§ DetailScreen ã«é·ç§»

### ğŸ” DetailScreen è¦ä»¶ä¸€è¦§

- ã‚¿ã‚¤ãƒˆãƒ«ã€ŒMemoryTalkã€ã¯å·¦ä¸Šå›ºå®š
- è©³ç´°æƒ…å ±ã®ãƒ†ã‚­ã‚¹ãƒˆã‚„ç”»åƒã‚’ç¾ã—ãè¡¨ç¤º
  @@ -242,96 +213,86 @@ YES ã¨è¨€ã‚ã‚ŒãŸã‚‰ã€ãã‚Œã‚’è¡¨ç¾ã™ã‚‹è‹±æ–‡ã‚’æ·»ãˆã¦ãã ã•ã„ã€‚

### ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ä¸€è¦§ / ç”»é¢é·ç§»å›³ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã©ã†ä½¿ã†ã‹ï¼‰

| ID  | ã‚¢ã‚¯ã‚¿ãƒ¼ | ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹                                       |
| --- | -------- | -------------------------------------------------- |
| UC1 | ãƒ¦ãƒ¼ã‚¶ãƒ¼ | å†™çœŸã‚’é¸ã³è‹±èªè¡¨ç¾ã‚’æŠ•ç¨¿ã— AI ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å¾—ã‚‹ |
| UC2 | ãƒ¦ãƒ¼ã‚¶ãƒ¼ | ä¿å­˜ã•ã‚ŒãŸå­¦ç¿’å±¥æ­´ã‚’é–²è¦§ã™ã‚‹                       |

```mermaid
flowchart TD
    Home --> |"å†™çœŸã§å­¦ç¿’"| Learning
    Learning --> |"ä¿å­˜"| Home
    Home --> |"å¾©ç¿’"| History
    History --> Detail
```

### æ¥­å‹™è¦ä»¶ãƒ•ãƒ­ãƒ¼å›³

```mermaid
flowchart LR
    Home[ãƒ›ãƒ¼ãƒ ] --> Select[å†™çœŸé¸æŠ]
    Select --> Input[è‹±èªå…¥åŠ›]
    Input --> Review[AIãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯]
    Review --> Save[ä¿å­˜]
    Save --> History[å±¥æ­´ä¸€è¦§]
    History --> Detail[è©³ç´°è¡¨ç¤º]
```

### ãƒ¯ã‚¤ãƒ¤ãƒ¼ãƒ•ãƒ¬ãƒ¼ãƒ ï¼ˆã©ã‚“ãªè¦‹ãŸç›®ã‹ï¼‰

#### Home

```
+----------------------+
| MemoryTalk           |
+----------------------+
| [å†™çœŸã§å­¦ç¿’ã™ã‚‹]      |
| [å¾©ç¿’ã™ã‚‹]           |
+----------------------+
#### Learning
```

+----------------------+
| < Home | MemoryTalk |
+----------------------+
| [Photo preview] |
| "æ°—æŒã¡ã‚’è‹±èªã§..." |
| [ TextInput ] |
| [ ç¢ºèªã™ã‚‹ ] |
+----------------------+

#### History

```
+----------------------+
| MemoryTalk           |
+----------------------+
| [Photo Grid]         |
+----------------------+
#### Detail
```

+----------------------+
| < Back MemoryTalk |
+----------------------+
| [Photo] |
| [Expression] |
| [AI Feedback] |
+----------------------+

````
### ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¨­è¨ˆ / ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒˆå›³ï¼ˆã©ã†å®Ÿè£…ã™ã‚‹ã‹ï¼‰

| ãƒ†ãƒ¼ãƒ–ãƒ«      | ä¸»ãªã‚«ãƒ©ãƒ                          |
|-------------|--------------------------------- |
| photos      | id, uri, created_at               |
| expressions | id, photo_id, text, created_at    |

```mermaid
flowchart LR
    User --> App
    App --> |"ç”»åƒå–å¾—"| MediaLibrary
    App --> |"AI è§£æ"| Gemini
    App --> |"ä¿å­˜"| Supabase[(DB)]
````

### ER å›³ï¼ˆã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãƒ»ãƒªãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚·ãƒƒãƒ—å›³ï¼‰

plaintext
ã‚³ãƒ”ãƒ¼ã™ã‚‹
ç·¨é›†ã™ã‚‹
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ users â”‚ 1 n â”‚ images â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â”‚
â”‚ â”‚
â–¼ â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ learning_histories â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ â”‚
â”‚ â”‚
â–¼ â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ favorites â”‚ â”‚ reviews â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
usersï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰1 : n imagesï¼ˆç”»åƒï¼‰

images 1 : n learning_historiesï¼ˆå­¦ç¿’å±¥æ­´ï¼‰

learning_histories 1 : 1 reviewsï¼ˆå¾©ç¿’ãƒ•ãƒ©ã‚°ï¼‰

images n : n favoritesï¼ˆãŠæ°—ã«å…¥ã‚Šï¼šãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ï¼‰

## users ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å   | å‹        | èª¬æ˜           | åˆ¶ç´„          |
| ---------- | --------- | -------------- | ------------- |
| id         | uuid      | ãƒ¦ãƒ¼ã‚¶ãƒ¼ ID    | PK            |
| name       | text      | ãƒ¦ãƒ¼ã‚¶ãƒ¼å     |               |
| email      | text      | ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ | Unique        |
| created_at | timestamp | ç™»éŒ²æ—¥æ™‚       | default=now() |

## images ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å   | å‹        | èª¬æ˜        | åˆ¶ç´„          |
| ---------- | --------- | ----------- | ------------- |
| id         | uuid      | ç”»åƒ ID     | PK            |
| user_id    | uuid      | ãƒ¦ãƒ¼ã‚¶ãƒ¼ ID | FK (users)    |
| image_url  | text      | ç”»åƒ URL    |               |
| created_at | timestamp | ç™»éŒ²æ—¥æ™‚    | default=now() |

## learning_histories ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å      | å‹        | èª¬æ˜           | åˆ¶ç´„          |
| ------------- | --------- | -------------- | ------------- |
| id            | uuid      | å±¥æ­´ ID        | PK            |
| user_id       | uuid      | ãƒ¦ãƒ¼ã‚¶ãƒ¼ ID    | FK (users)    |
| image_id      | uuid      | ç”»åƒ ID        | FK (images)   |
| input_text    | text      | å…¥åŠ›ã—ãŸè¡¨ç¾   |               |
| feedback_text | text      | æ·»å‰Šå†…å®¹       |               |
| advice_text   | text      | ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ |               |
| learned_at    | timestamp | å­¦ç¿’æ—¥æ™‚       | default=now() |
| is_review     | boolean   | å¾©ç¿’ãƒ•ãƒ©ã‚°     | default=false |
| created_at    | timestamp | å±¥æ­´ä½œæˆæ—¥æ™‚   | default=now() |

## favorites ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å                  | å‹        | èª¬æ˜                      | åˆ¶ç´„          |
| ------------------------- | --------- | ------------------------- | ------------- |
| id                        | uuid      | ãŠæ°—ã«å…¥ã‚Š ID             | PK            |
| user_id                   | uuid      | ãƒ¦ãƒ¼ã‚¶ãƒ¼ ID               | FK (users)    |
| image_id                  | uuid      | ç”»åƒ ID                   | FK (images)   |
| created_at                | timestamp | ç™»éŒ²æ—¥æ™‚                  | default=now() |
| UNIQUE(user_id, image_id) |           | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã”ã¨ç”»åƒ 1 ã¤ã¾ã§ |               |

## reviews ãƒ†ãƒ¼ãƒ–ãƒ«

| ã‚«ãƒ©ãƒ å            | å‹        | èª¬æ˜         | åˆ¶ç´„                    |
| ------------------- | --------- | ------------ | ----------------------- |
| id                  | uuid      | ãƒ¬ãƒ“ãƒ¥ãƒ¼ ID  | PK                      |
| learning_history_id | uuid      | å­¦ç¿’å±¥æ­´ ID  | FK (learning_histories) |
| reviewed_at         | timestamp | å¾©ç¿’ã—ãŸæ—¥æ™‚ | default=now()           |
